local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local lp = Players.LocalPlayer or Players:GetPropertyChangedSignal("LocalPlayer"):Wait() and Players.LocalPlayer
local mouse = lp:GetMouse()
local triggerEnabled = false

local function gettarget(instance)
   for i, v in next, Players:GetPlayers() do
      if v.Character and (instance == v.Character or instance:IsDescendantOf(v.Character)) then
         return true
      end
   end
end

local con
UserInputService.InputBegan:Connect(function(input, processed)
   if processed then return end
   if input.KeyCode == Enum.KeyCode.C then
      triggerEnabled = not triggerEnabled

      if triggerEnabled then
         con = RunService.Heartbeat:Connect(function()
            if gettarget(mouse.Target) then
               mouse1press()
               task.wait()
               mouse1release()
            end
         end)
      elseif con then
         con:Disconnect()
      end
   end
end)

getgenv().disable = function()
   getgenv().disable = nil
   if con then
      warn("Disconnecting:", con)
      con:Disconnect()
   end
end

print("skibidi")
